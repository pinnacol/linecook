(source, target, options={})
--
<% only_if %Q{#{_file?(target)} && ! cmp -s "#{source}" "#{target}"} do %>
mv "<%= target %>" "$LINECOOK_BACKUP_DIR/$(basename "<%= target %>").$(date '+%Y%m%d.%H%M%S.%N')"
<% check_status %>
<% end %>
cp "<%= source %>" "<%= target %>"
<% check_status %>
<% chmod(target, options[:mode]) %>
<% chown(target, options[:user], options[:group]) %>
