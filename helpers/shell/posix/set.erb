Sets bash options for the duration of a block.  If no block is given,
set simply sets the options as specified.
(options)
--
<% if block_given? %>
<% reset_file = "LINECOOK_RESET_OPTIONS_#{next_count}" %>
<%= reset_file %>=`mktemp /tmp/line_cook_reset_fileXXXXXX`
set -o | sed 's/\(.*\)	on/set -o \1/' | sed 's/\(.*\)	off/set +o \1/' > $<%= reset_file %>
<% end %><% options.keys.sort_by {|opt| opt.to_s }.each do |opt| %>
set <%= options[opt] ? '-' : '+' %>o <%= opt %>
<% end %>
<% if block_given? %>

<% indent { yield }  %>

source $<%= reset_file %>
<% end %>
