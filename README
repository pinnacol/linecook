= Linecook

A shell script generator.

== Description

Linecook generates shell scripts using an extensible set of tiny ERB helpers.
The shell scripts and associated resources (files, subscripts, etc) make up
packages that can be used, for example, to provision servers.

The workflow is like this:

* define helpers
* write recipes using the helpers
* generate packages from the recipes

Linecook provides a command-line tool for generating helpers, packages, and
for running a test vm. Helpers and recipes can be shared as gems; the basic
shell helpers are available through
{Linebook}[http://http://rubygems.org/gems/linebook/].

== Usage

Generate a cookbook.

  % linecook init example
  % cd example

Make some helpers.

  [helpers/example/head-section.rb]
  COLOR_CODES = Hash[*%W{
    black       0;30   red         0;31
    white       1;37   green       0;32
    light_gray  0;37   blue        0;34
  }]
  
  [helpers/example/color.erb]
  Adds color to a string.
  (color, str)
  --
  \033[<%= COLOR_CODES[color.to_s] %>m<%= str %>\033[0m
  
  [helpers/example/echo.erb]
  Echo a string in color
  (str, options={})
  color = options[:color]
  --
  echo -e '<%= color ? _color(color, str) : str %>'

Define default attributes.

  [attributes/example.rb]
  attrs['example']['n'] = 3
  attrs['example']['color'] = 'blue'

Use them in a recipe.

  [recipes/example.rb]
  helpers "example"
  attributes "example"
  
  attrs['example']['n'].times do
    echo "I will not manually configure my server", :color => attrs['example']['color']
  end

Define a package that uses the recipe.

  [packages/example.yml]
  linecook:
    recipes:
    - example
  example:
    n: 100

Generate a package from the helpers, attributes, and recipe. The result will
be a helper module in the 'lib' directory, generated from the definitions
under the 'helpers' directory, and a package under the packages directory,
generated from the example.yml file.

  % rake packages

Start the VM and run the script in the package (see the
{docs}[link:templates/README] for setting up a VM).

  % linecook start
  % linecook share vbox
  % linecook ssh 
  vm: bash /vbox/packages/example/example
  vm: exit

Stop the VM.

  % linecook stop

== Installation

Linecook is available as a gem on {Gemcutter}[http://gemcutter.org/gems/linecook]

  % gem install linecook

== Info 

Developer:: {Simon Chiang}[http://bahuvrihi.wordpress.com]
License:: {MIT-Style}[link:files/License_txt.html]