= Linecook

A shell script generator.

== Description

Linecook lets you generate shell scripts using an extensible set of tiny ERB
helpers. The helpers output a shell script that you can use to (for example)
provision a server.

The workflow is like this:

* define helpers
* write a recipe using the helpers
* generate a script from the recipe

Linecook provides very basic helpers for POSIX shells and a command-line tool
for generating scripts and running them on a test vm.

== Usage

Generate a cookbook.

  % linecook example
  % cd example

Make some helpers.

  [helpers/example/_head.rb]
  COLOR_CODES = Hash[*%W{
    black       0;30   red         0;31
    white       1;37   green       0;32
    light_gray  0;37   blue        0;34
  }]
  
  [helpers/example/color.erb]
  Adds color to a string.
  (color, str)
  --
  \033[<%= COLOR_CODES[color.to_s] %>m<%= str %>\033[0m
  
  [helpers/example/echo.erb]
  Echo a string in color
  (str, options={})
  color = options[:color]
  --
  echo -e '<%= color ? _color(color, str) : str %>'

Define default attributes.

  [recipes/example.rb]
  attrs['example']['n'] = 3
  attrs['example']['color'] = 'blue'

Use them in a recipe.

  [recipes/example.rb]
  helpers "example"
  attributes "example"
  
  attrs['example']['n'].times do
    echo "I will not manually configure my server", :color => attrs['example']['color']
  end

Define a script using the recipe.

  [scripts/example.yml]
  linecook:
    recipe_name: example
    script_name: example.sh
  example:
    n: 100

Generate a script from the helpers, attributes, and recipe.

  % rake scripts

Start the VM and run the scripts (see the docs for setting up a VM).

  % rake vbox:start
  % rake vbox:ssh 
  vm: bash /vbox/scripts/example.sh
  vm: exit

Stop the VM.

  % rake vbox:stop

== Installation

Linecook is available as a gem on {Gemcutter}[http://gemcutter.org/gems/linecook]

  % gem install linecook

== Info 

Developer:: {Simon Chiang}[http://bahuvrihi.wordpress.com]
License:: {MIT-Style}[link:files/License_txt.html]